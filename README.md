# 온라인 쇼핑 서비스

이 프로젝트는 온라인 쇼핑 시스템을 구축하는 것을 목표로 합니다. 이 시스템은 회원 관리, 상품 관리, 주문 처리, 쿠폰 관리, 포인트 시스템 등을 포함합니다.

## 요구사항

### 상품

1. 상품을 등록 할 수 있다. [o]
   - 인증된 사용자만 사용할 수 있다.
   - 상품 생성 정보
     - 상품 생성에는 상품명, 가격, 재고가 반드시 필요하다
       - 상품명은 동일한 상품명이 있을 수도 있다.
     - 상품 생성에는 카테고리명, 이미지, 상세 정보가 있을 수 있다.
   - 상품 가격은 0원보다 커야 한다.
   - 상품 등록 시에는 재고가 1이상으로 등록해야 한다.
   - 상품은 각 상품의 상태를 나타내는 값이 존재한다.
     - 판매 가능, 매진
     - 상품 상태의 기본값은 판매 가능이며 상품 등록 과정을 통해 상태 값은 판매 가능으로 설정되어야 한다.
2. 모든 상품 정보를 조회할 수 있다. [o]
   - 모든 사용자가 사용할 수 있다.
3. 상품 정보를 수정할 수 있다.
   - admin 권한을 가진 사용자만 사용할 수 있다.
   - 상품명, 가격, 재고, 카테고리명, 이미지, 상세 정보를 수정 가능하다.
4. 상품 정보를 삭제할 수 있다.
   - admin 권한을 가진 사용자만 사용할 수 있다.
5. 상품 상태는 변경 될 수 있다.
   - 재고가 없는 경우 자동으로 매진 상태로 변경된다.
   - 재고가 생긴 경우 자동으로 판매 가능 상태로 변경된다.

### 주문

1. 주문을 등록 할 수 있다. [o]
   - 인증된 사용자만 사용할 수 있다.
   - 주문 생성 요청 정보
     - 주문한 사용자의 식별자, 주문 상품 목록이 반드시 필요하다.
       - 주문 상품 목록은 상품 식별자와 상품 수량으로 구성된다.
         - 상품 식별자는 등록되어 있는 상품 식별자여야 한다.
     - 쿠폰 번호, 포인트 사용량, 배달지 주소가 있을 수도 있다.
   - 주문할 경우 운송정보를 등록해야 한다.
     - 운송정보는 운송 상태, 배달 주소, 운송장 번호, 운송 회사로 구성된다.
     - 운송 상태, 배달 주소가 반드시 포함되어야 한다.
     - 운송의 상태를 나태내는 값이 존재한다.
       - 주문완료, 출고 준비 중, 출고 완료, 배송 중, 배송 완료
   - 주문에는 각 주문의 상태를 나타내는 값이 존재한다.
     - 주문 시작, 결제 완료, 환불
     - 주문 상태의 기본값은 주문 시작이며 상품 등록 과정을 통해 상태 값은 주문 시작로 설정되어야 한다.
2. 주문정보를 조회할 수 있다.
   - 관리자 혹은 주문자만 사용할 수 있다.
3. 주문을 취소할 수 있다.
   - 관리자 혹은 주문자만 사용할 수 있다.
4. 주문 상태는 변경될 수 있다.
   - 결제가 완료된 경우 주문 상태를 결제 완료로 변경한다.
   - 구매자가 주문 취소한 경우 주문 상태를 환불로 변경한다.

### 쿠폰

1. 쿠폰을 발급할 수 있다. [o]
   - 쿠폰을 발급할 때에는 발급일, 만료일, 쿠폰 종류, 할인 가치, 사용자가 반드시 필요하다.
2. 쿠폰 사용가능 여부를 판단하는 기능이 존재한다. [o]
   - 쿠폰 만료일이 지난 경우 쿠폰 사용가능 여부.
   - 쿠폰이 사용된 경우
3. 쿠폰 사용 유무는 변경될 수 있다.
   - 쿠폰을 사용한 경우 사용일을 저장한다. [o]
   - 사용된 쿠폰이 취소된 경우 사용일을 삭제한다.
4. 쿠폰을 조회할 수 있다.
   - 사용자 본인의 쿠폰을 조회할 수 있다.
5. 주문 시 쿠폰을 사용할 수 있다. [o]
   - 인증된 사용자만 사용할 수 있다.
   - 쿠폰 사용시 쿠폰의 사용가능 여부를 검증해야 한다.
     - 유효기간, 사용 유무를 체크해야 한다.

### 포인트

1. 포인트를 얻을 수 있다. [o]
   - 인증된 사용자만 사용할 수 있다.
   - 획득 포인트, 포인트 종류, 획득 사유가 반드시 존재해야 한다.
2. 주문 시 포인트를 사용할 수 있다. [o]
   - 인증된 사용자만 사용할 수 있다.
   - 포인트의 사용가능 여부를 검증해야 한다.
     - 본인이 가지고 있는 만큼의 포인트만 사용가능하다
     - 포인트는 0보다 적을 수 없다.

### 결제

1. 주문 내역에 대해 결제 요청을 할 수 있다. [o]
   - 인증된 사용자만 사용할 수 있다.
   - 결제 요청에는 결제 방식, 주문 총액, 주문번호, 주문자 정보가 반드시 필요하다.
   - 주문 정보와 결제 요청 정보간 검증이 필요하다
     - 주문 정보의 총액과 결제 요청 정보의 총액은 같아야 한다.
   - 결제 요청에는 결제 방식, 결제 총액, 주문번호, pk, 주문자 이메일, 주문자, 결제 요청 성공 redirect URL, 결제 요청 실패 redirect URL이 반드시 포함되어야 한다.
2. 결제 요청 성공 시 결제 승인 요청을 할 수 있다. [o]
   - 결제 요청 성공 시 결제 총액, 주문 식별자, paymentKey가 포함된다.
   - 결제 정보가 검증되어야 한다.
     - 주문 총액과 결제 총액은 일치해야 한다.
   - 정해진 api로 결제 승인 요청을 보내야 한다.
     - 결제 총액, 주문 식별자, paymentKey가 반드시 포함되야 한다.
     - secretKey를 base64로 인코딩해야 한다.
   - 결제 정보를 갱신해야 한다.
     - paymentKey를 반영해야 한다.
     - 결제 성공을 판단하는 paySuccess를 true로 변경해야 한다.
3. 결제 요청 실패 시 결과를 반영할 수 있다 [o]
   - 오류 코드, 오류 메시지, 주문 식별자가 바늗시 포함된다.
   - 결제 정보를 갱신해야 한다.
     - 결제 실패를 판단하는 paySuccess를 false로 변경해야 한다.
     - 결제 실패 사유를 반영해야 한다.
   - 오류 코드, 오류 메시지, 주문 식별자를 반환해야 한다.
